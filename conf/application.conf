# Copyright 2023 HM Revenue & Customs
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

include "frontend.conf"

appName = "income-tax-subscription-frontend"

# Fix for SSLEngine closed already exception
http-verbs.retries.ssl-engine-closed-already.enabled = true

# Key for encrypting json
json.encryption.key = "AKxuJP8pVtMSlMImimoeTYoxxG0HUMOlh7BxiQkrkW8="

# Play filters
play.filters.enabled += play.filters.csp.CSPFilter

# Custom error handler
play.http.errorHandler = "config.ErrorHandler"

# Routes file to use
play.http.router = prod.Routes

# Languages supported
play.i18n.langs = ["en", "cy"]

# Play Modules
play.modules.enabled += "uk.gov.hmrc.play.bootstrap.HttpClientModule"
play.modules.enabled += "uk.gov.hmrc.play.bootstrap.AuthModule"

play.ws.ssl.enabledProtocols = [
  "TLSv1.2",
  "TLSv1.1"
]

# Accessibility statement frontend config
accessibility-statement {
  service-path = "/income-tax-sign-up"
}

agent-services {
  url = "https://www.tax.service.gov.uk/agent-subscription/start"
}

agent-services-frontend {
  url = "http://localhost:9401/agent-services-account"
}

base {
  url = "http://localhost:9561"
}

bta {
  url = "https://www.tax.service.gov.uk/business-account"
  baseUrl ="http://localhost:9020"
}

contact-frontend {
  host = "http://localhost:9250"
  serviceId = "MTDIT"
}

# Feature switch config
feature-switch {
  email-capture-consent = false
  throttle = false
  signal-control-gateway-eligibility = false
}

# Feedback frontend - Individuals
feedback-frontend {
  url = "http://localhost:9514/feedback/ITSU"
}

# Feedback frontend - Agents
feedback-frontend-A {
  url = "http://localhost:9514/feedback/ITSU-A"
}

government-gateway {
  url = "http://localhost:9553"
}

govuk-guidance {
  url = "https://www.gov.uk/guidance"
}

# Identity verification frontend config
identity-verification-frontend {
  url = "http://localhost:9948"
  uplift-uri = "/iv-stub/uplift"
  origin = "itsa-su"
  target-confidence-level = 250
}

income-tax-subscription-agent-frontend {
  url = "http://localhost:9562"
}

income-tax-subscription-self-employed-frontend {
  url = "http://localhost:9563"
}

# Agent lockout config
lockout {
  maxAttempts = 3
  lockOutSeconds = 60
}

# Play partials config
play-partial {
    cache {
        refreshAfter = "60 seconds"
        expireAfter = "60 minutes"
        maxEntries = 1000
    }
}

preferences-frontend  {
  url = "http://localhost:9024"
}

sa-signup {
  url = "https://www.gov.uk/log-in-file-self-assessment-tax-return/register-if-youre-not-self-employed"
}

# Timeout config
session-timeout {
  seconds = 900
  warning = 120
}

# Tracking consent config
tracking-consent-frontend {
  gtm.container = "b"
}

# UR banner url
urBannerUrl {
    url = "https://signup.take-part-in-research.service.gov.uk/home?utm_campaign=MTDfBregistration&utm_source=Other&utm_medium=other&t=HMRC&id=31"
}

# Microservice specific config
microservice {
  services {
    agent-client-relationships {
      host = localhost
      port = 9562
    }

    auth {
      host = localhost
      port = 8500
    }

    authenticator {
      host = localhost
      port = 9905
    }

    channel-preferences {
      host = localhost
      port = 9052
    }

    citizen-details {
      host = localhost
      port = 9337
    }

    enrolment-store-proxy {
      host = localhost
      port = 9595
    }

    enrolment-store-stub {
      host = localhost
      port = 9595
    }

    entity-resolver {
      host = localhost
      port = 8015
    }

    income-tax-subscription {
      host = localhost
      port = 9560
    }

    income-tax-subscription-eligibility {
      host = localhost
      port = 9588
    }

    matching-stubs {
      host = localhost
      port = 9353
    }

    preferences-frontend {
      host = localhost
      port = 9024
    }

    tax-enrolments {
      host = localhost
      port = 9995
    }

    users-groups-search {
      host = localhost
      port = 9595
    }
  }
}